# Airflow –≤ Docker: –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ó–∞–ø—É—Å—Ç–∏—Ç–µ Apache Airflow —Å PostgreSQL –∏ MinIO –≤ Docker ‚Äî –∑–∞ 5 –º–∏–Ω—É—Ç.  
–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Windows —Å WSL 2.

---

## üõ† –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Desktop (–¥–ª—è Windows)

> Airflow –∏ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.

–°–∫–∞—á–∞—Ç—å: [https://www.docker.com/products/docker-desktop](https://www.docker.com/products/docker-desktop)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ, –∑–∞–ø—É—Å—Ç–∏–º –ø–æ–∑–∂–µ –≤ —à–∞–≥–µ 3.

---

### 2. –í–∫–ª—é—á–∏—Ç–µ WSL 2

**WSL 2 (Windows Subsystem for Linux)** –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- Docker Desktop **—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ WSL 2**
- WSL 1 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- WSL 2 ‚Äî —ç—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∞—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ —Å —è–¥—Ä–æ–º Linux

#### –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å:

1. –û—Ç–∫—Ä–æ–π—Ç–µ PowerShell **–æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

   ```powershell
   dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
   dism.exe /online /enable-feature /featurename:Microsoft-VirtualMachinePlatform /all /norestart
   ```
   
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥—Å–∏—Å—Ç–µ–º—É **Windows –¥–ª—è Linux (WSL)** ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ª–æ–π, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ Linux-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã –ø—Ä—è–º–æ –Ω–∞ Windows.
–ë–µ–∑ —ç—Ç–æ–≥–æ WSL –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ–æ–±—â–µ.

3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —è–¥—Ä–æ WSL 2: https://aka.ms/wsl2kernel

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π .msi-—Ñ–∞–π–ª –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ

5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ubuntu 24.04 (–¥–ª—è —Ç–µ—Å—Ç–∞)
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ Linux:

```
wsl --install -d Ubuntu-24.04
```

–ò –ø—Ä–æ–≤–µ—Ä–∏–º –≤–µ—Ä—Å–∏—é **WSl**

```
wsl -l -v
```

```
NAME           STATE      VERSION
Ubuntu-24.04   Running    2
```

---

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop
–ó–∞–ø—É—Å—Ç–∏—Ç–µ, –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Docker –ø–æ–ø—Ä–æ—Å–∏—Ç:

> –†–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WSL 2
>
> –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
>
> –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ Docker –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è

---

### 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ª–µ–∂–∞—Ç –¥–≤–∞ —Ñ–∞–π–ª–∞ - **docker-compose.yml** –∏ **hello_dag.py**
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ docker-compose.yml –≤ –ø–∞–ø–∫—É –≥–¥–µ –±—É–¥–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å docker-compose, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø–∞–ø–∫—É: **airflow_docker**


–¢–∞–º —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫–∏: **dags**, **logs**, **plugins**

> **dags** ‚Äî –¥–ª—è –≤–∞—à–∏—Ö DAG-—Ñ–∞–π–ª–æ–≤
>
> **logs** ‚Äî –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
>
> **plugins** ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ —Ö—É–∫–∏

–í –ø–∞–ø–∫—É **dags** —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ **hello_dag.py**

---

### 5. –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Dockerfile

```
docker-compose up -d
```

2. –í–æ–π–¥–∏—Ç–µ http://localhost:8080. 
 
–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, **–õ–æ–≥–∏–Ω**: admin, **–ü–∞—Ä–æ–ª—å:** admin
–õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –∫–æ–º–∞–Ω–¥–µ airflow users create –≤–Ω—É—Ç—Ä–∏ airflow-init. 

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DAG –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
–û–±–Ω–æ–≤–∏—Ç–µ Airflow UI

–ß–µ—Ä–µ–∑ 10‚Äì30 —Å–µ–∫—É–Ω–¥ DAG –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è

–ù–∞–∂–º–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
>
> –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É
>
> ```docker-compose down```

---

### **–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, –≤—Å–µ —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!**

